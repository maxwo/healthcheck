language: java
jdk:
- oraclejdk8

env:
  global:
  - secure: 27P1EPwJ1uqgpJtGzKOGCKRtDKKMXjIWw1nff1DwzLHuT0PVma5nyawF+AvV6o57HscRNhWnEFpgLWbsPXIFTmyOv5FCstzfWOBjugN+cX72vCa3V7lIVqxU+55v+P9Y0BHAsqliZbbQR8MoayXWnOwWcvXmrgNB6peo8WzuFfzMjjNzVF8PO2W38krPZPKh1IhDDpcGAGtUkLYWyhZXlFt7CucjBmIxZui7LOUEr3LTQAD9Q6RhYaNCKGDnjWGgjjO3dDR9lqGnYDECgHIHyYAKc/QFdl9q1ku4hioabIoP4wjmaKJKnUOzwsfk1oKk4pR7QV4IcCRHDNYr8pvqv2YwVdx0N1apemQxtctPNVxC5ehHup38DOtNJV6VImbLtejvJEQWYJSS/Oo54EfNMdncwp2ehm0u1Rsf9HJH41OxtQoMUYxC4ZNIs8g2yMY8Mqlew0lOLx1bsQU0HlFfKSaJLiuYW45MUKrNv8tRaj62Uyl9SeiujjMJox7AzmsBqHDCd/vpmrI9VPSucMzM41M3dEJEip3xdayTAkMkE08vwsLWBo9o+LcU/rWLPsPC2XyFozE6Ks3KBwHEmqKN5TMvjQRtoZfbQwfCpdDDtolatrAxCpYz/3SHNUco3699VSG9c0ujKpe3EtkwGVu0TFEFGSHnJdMmGgakHU5xTro=
  - secure: wLQoMhvVaHyC2SsMvxcvGUm1wP573WrnaL42jgi1CRYps81p9Hnls3fDnM36QgCESHI3HxYqL24w9tTZqIrPQH12otRs5kdYyn+27zZQtEBdKVUQkungcx6bCVUt36CIL0Zc02/w/g22fFnV341vXpbH935zK5pMRNrfVue/3/eFmog2hEXtN+CK/egRRBxG5d7erZdQHAZxt5gAjfdOP9IlCwaKtSCJd95liCVpMj4bEhJQEQEJtIdxBrehoewzouY5MZIdchuJ7znFL10+LWvn8uUYWHvFLFTRlletTzlF9NAhzboxaWrqetRIe0O+Qey7v1c+k4kIVK97OkBwmIx8yKuFcctQO4voBULa+isWaArKwxf08B0IO8FRCIIui29SYTM8G1TDfwpRP9lHxcPXKk5SYw1OoIXTnTkPZ9ODd7Gs0Jq4pVbCpEugBxN7/jXC3MZo7eltGfLhfiDhl9OMDGRnPL3URGje1fSdp3nT/V4pSe68em05TfJTeuigAhCTNg48wN2MHNpwaV/SGSRDbhHO/FhgAnlMIBuZtEPLp7G8DmjmYSpDK0aDD5DAE6STUdlEWwsNiZAeuWVYQ47QLmTbZNe2Xo4GCA30iC3PvmARXKdLrj2w/EDkTuZKMyInkBn0Wt8gxlogMhzy6kCsJZ79t1YvOJ0JZoIAgcQ=

services:
- docker

after_success:
  - export DOCKER_REPOSITORY=$TRAVIS_REPO_SLUG
  - export DOCKER_USERNAME=$(echo $DOCKER_REPOSITORY | sed 's#\/.*##')
  - export DOCKER_TAG=`if [ "$TRAVIS_BRANCH" == "master" ]; then echo "latest"; else echo $TRAVIS_BRANCH ; fi`
  - docker login -u $DOCKER_USERNAME -p $DOCKER_PASSWORD
  - docker build -t $DOCKER_REPOSITORY:$TRAVIS_COMMIT .
  - docker tag $DOCKER_REPOSITORY:$TRAVIS_COMMIT $DOCKER_REPOSITORY:$DOCKER_TAG
  - docker push $DOCKER_REPOSITORY
  - mvn javadoc:javadoc

deploy:
  provider: pages
  local_dir: target/site/apidocs
  skip_cleanup: true
  github_token: $GITHUB_TOKEN
  on:
    branch: master
